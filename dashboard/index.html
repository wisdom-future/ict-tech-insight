<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€æœ¯æ´å¯Ÿç³»ç»Ÿç›‘æ§ä»ªè¡¨æ¿</title>
    
    <!-- æ ·å¼æ–‡ä»¶ - ä¿®æ”¹è·¯å¾„ -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/mobile.css">
    
    <!-- PWAæ”¯æŒ -->
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="æŠ€æœ¯æ´å¯Ÿç³»ç»Ÿ">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº - ä¿®æ”¹è·¯å¾„ -->
    <link rel="preload" href="config/config.js" as="script">
    <link rel="preload" href="assets/js/utils.js" as="script">
    <link rel="preload" href="assets/js/api.js" as="script">
</head>
<body>
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <header class="dashboard-header">
        <div class="header-left">
            <h1>ğŸ” æŠ€æœ¯æ´å¯Ÿç³»ç»Ÿ</h1>
            <div class="system-status">
                <span class="status-indicator">ğŸŸ¢</span>
                <span id="systemStatus">ç³»ç»ŸçŠ¶æ€ï¼šåˆå§‹åŒ–ä¸­</span>
            </div>
        </div>
        <div class="header-controls">
            <span class="last-update" id="lastUpdate">æœ€åæ›´æ–°: --</span>
            <button class="btn-refresh" id="refreshBtn">ğŸ”„ åˆ·æ–°</button>
            <button class="btn-settings" id="settingsBtn">âš™ï¸</button>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="dashboard-main">
        <!-- å…³é”®æŒ‡æ ‡æ¦‚è§ˆ -->
        <section class="metrics-overview">
            <div class="section-header">
                <h2>ğŸ“Š ç³»ç»Ÿè¿è¡Œæ¦‚è§ˆ</h2>
            </div>
            <div class="metrics-grid">
                <!-- ç³»ç»Ÿå¥åº·åº¦ -->
                <div class="metric-card health-card">
                    <div class="metric-header">
                        <h3>ğŸ“Š ç³»ç»Ÿå¥åº·åº¦</h3>
                        <span class="metric-icon" id="healthIcon">ğŸ’š</span>
                    </div>
                    <div class="metric-value" id="systemHealth">--</div>
                    <div class="metric-trend" id="systemHealthTrend">ç³»ç»Ÿåˆå§‹åŒ–ä¸­</div>
                    <div class="metric-detail">æ­£åœ¨æ£€æµ‹ç³»ç»ŸçŠ¶æ€</div>
                    <div class="loading-progress">
                        <div class="progress-bar" id="healthProgressBar"></div>
                    </div>
                </div>

                <!-- ä»Šæ—¥æ´å¯Ÿ -->
                <div class="metric-card">
                    <div class="metric-header">
                        <h3>ğŸ“ˆ ä»Šæ—¥æ´å¯Ÿ</h3>
                        <span class="metric-icon">ğŸ¯</span>
                    </div>
                    <div class="metric-value" id="todayInsights">--</div>
                    <div class="metric-trend neutral" id="todayInsightsTrend">ğŸ‘† ä¸æ˜¨æ—¥å¯¹æ¯”</div>
                    <div class="metric-detail">åŒ…å«é«˜ä»·å€¼æ´å¯Ÿ <span id="highValueCount">--</span> æ¡</div>
                </div>

                <!-- å‘Šè­¦æ•°é‡ -->
                <div class="metric-card alert-card">
                    <div class="metric-header">
                        <h3>âš ï¸ å‘Šè­¦æ•°é‡</h3>
                        <span class="metric-icon">ğŸš¨</span>
                    </div>
                    <div class="metric-value" id="alertCount">--</div>
                    <div class="metric-trend neutral" id="alertCountTrend">ğŸ‘† éœ€è¦å…³æ³¨</div>
                    <div class="metric-detail"><span id="alertCount">--</span> ä¸ªé«˜ä¼˜å…ˆçº§å‘Šè­¦</div>
                </div>

                <!-- è¿è¡ŒçŠ¶æ€ -->
                <div class="metric-card workflow-card">
                    <div class="metric-header">
                        <h3>ğŸ”„ è¿è¡ŒçŠ¶æ€</h3>
                        <span class="metric-icon">âš¡</span>
                    </div>
                    <div class="metric-value" id="runningWorkflows">è¿è¡Œä¸­</div>
                    <div class="metric-trend neutral" id="runningWorkflowsTrend"><span id="runningWorkflows">--</span> ä¸ªå·¥ä½œæµ</div>
                    <div class="metric-detail">ç³»ç»Ÿæ­£å¸¸è¿è¡Œ</div>
                </div>
            </div>
        </section>

        <!-- æ ¸å¿ƒä¸šåŠ¡å¯è§†åŒ– -->
        <section class="business-visualization">
            <div class="section-header">
                <h2>ğŸ“Š æ ¸å¿ƒä¸šåŠ¡å¯è§†åŒ–</h2>
            </div>
            
            <!-- æ•°æ®æµè½¬åˆ†æ -->
            <div class="data-flow-grid">
                <div class="funnel-chart-panel">
                    <div class="panel-header">
                        <h3>æ•°æ®æ”¶æ•›æµè½¬åˆ†æ</h3>
                        <div class="chart-controls">
                            <span class="panel-subtitle">ğŸ“Š å±•ç¤ºä»åŸå§‹æ•°æ®åˆ°æœ€ç»ˆæŠ€æœ¯çº¿ç´¢çš„æ”¶æ•›è¿‡ç¨‹å’Œæ•°é‡åˆ†å¸ƒ</span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <!-- æµè½¬ç»Ÿè®¡ -->
                        <div class="flow-stats">
                            <div class="flow-stat">è½¬åŒ–ç‡ <strong id="conversionRate">--</strong></div>
                            <div class="flow-stat">å¤„ç†æ•ˆç‡ <strong id="processingEfficiency">--</strong></div>
                            <div class="flow-stat">æ€»è¾“å…¥ <strong id="totalInput">--</strong></div>
                            <div class="flow-stat">æ€»è¾“å‡º <strong id="totalOutput">--</strong></div>
                        </div>
                        
                        <!-- æµè½¬æ­¥éª¤ -->
                        <div class="funnel-steps">
                            <div class="funnel-step">
                                <div class="step-header">
                                    <span class="step-icon">ğŸ“¥</span>
                                    <span class="step-label">åŸå§‹æ•°æ®</span>
                                    <span class="step-tag">RAW</span>
                                </div>
                                <div class="step-value" id="rawDataCount">355</div>
                                <div class="step-desc">å­¦æœ¯è®ºæ–‡ã€ä¸“åˆ©ã€æ–°é—»ç­‰</div>
                                <div class="step-arrow">87%</div>
                            </div>
                            
                            <div class="funnel-step">
                                <div class="step-header">
                                    <span class="step-icon">ğŸ§ </span>
                                    <span class="step-label">æ™ºèƒ½æ´å¯Ÿ</span>
                                    <span class="step-tag">Intelligence</span>
                                </div>
                                <div class="step-value" id="intelligenceCount">16</div>
                                <div class="step-desc">AIè¯†åˆ«çš„æŠ€æœ¯ä¿¡å·</div>
                                <div class="step-arrow">78%</div>
                            </div>
                            
                            <div class="funnel-step">
                                <div class="step-header">
                                    <span class="step-icon">ğŸ”</span>
                                    <span class="step-label">æŠ€æœ¯çº¿ç´¢</span>
                                    <span class="step-tag">Clues</span>
                                </div>
                                <div class="step-value" id="cluesCount">--</div>
                                <div class="step-desc">éªŒè¯é€šè¿‡çš„æœ‰æ•ˆçº¿ç´¢</div>
                                <div class="step-arrow">65%</div>
                            </div>
                            
                            <div class="funnel-step">
                                <div class="step-header">
                                    <span class="step-icon">ğŸ¯</span>
                                    <span class="step-label">è¡ŒåŠ¨å»ºè®®</span>
                                    <span class="step-tag">Actions</span>
                                </div>
                                <div class="step-value" id="actionsCount">--</div>
                                <div class="step-desc">å¯æ‰§è¡Œçš„å†³ç­–å»ºè®®</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è´¨é‡ç›‘æ§ -->
                <div class="quality-metrics-panel">
                    <div class="panel-header">
                        <h3>æ•°æ®è´¨é‡ç›‘æ§</h3>
                    </div>
                    <div class="quality-grid">
                        <div class="quality-item">
                            <span class="quality-label">å‡†ç¡®æ€§</span>
                            <span class="quality-value">95.2%</span>
                        </div>
                        <div class="quality-item">
                            <span class="quality-label">å®Œæ•´æ€§</span>
                            <span class="quality-value">88.7%</span>
                        </div>
                        <div class="quality-item">
                            <span class="quality-label">åŠæ—¶æ€§</span>
                            <span class="quality-value">92.1%</span>
                        </div>
                        <div class="quality-item">
                            <span class="quality-label">ä¸€è‡´æ€§</span>
                            <span class="quality-value">89.3%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å·¥ä½œæµçŠ¶æ€ç›‘æ§ -->
        <section class="workflow-monitoring">
            <div class="section-header">
                <h2>ğŸ”„ å·¥ä½œæµå®æ—¶çŠ¶æ€ç›‘æ§</h2>
                <div class="section-controls">
                    <span class="panel-subtitle">ğŸ”„ æ˜¾ç¤ºå½“å‰æ‰€æœ‰å·¥ä½œæµçš„æœ€æ–°æ‰§è¡ŒçŠ¶æ€å’Œæ—¶é—´ä¿¡æ¯</span>
                </div>
            </div>
            
            <div class="workflow-grid">
                <div class="workflow-status-panel">
                    <div class="panel-header">
                        <h3>å½“å‰å·¥ä½œæµçŠ¶æ€</h3>
                        <div class="status-legend">
                            <div class="legend-item">
                                <div class="dot success"></div>
                                <span>å·²å®Œæˆ</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot warning"></div>
                                <span>è¿è¡Œä¸­</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot danger"></div>
                                <span>å¤±è´¥</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot secondary"></div>
                                <span>ç­‰å¾…ä¸­</span>
                            </div>
                        </div>
                    </div>
                    <div class="workflow-list" id="workflowList">
                        <div class="loading">æ­£åœ¨åŠ è½½å·¥ä½œæµçŠ¶æ€...</div>
                    </div>
                </div>

                <div class="workflow-timeline-panel">
                    <div class="panel-header">
                        <h3>æ‰§è¡Œæ—¶é—´çº¿</h3>
                    </div>
                    <div class="chart-container">
                        <div class="loading">æ—¶é—´çº¿å›¾è¡¨åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ä¸šåŠ¡ä»·å€¼åˆ†æ -->
        <section class="business-value">
            <div class="section-header">
                <h2>ğŸ’° ä¸šåŠ¡ä»·å€¼åˆ†æ</h2>
            </div>
            
            <div class="value-grid">
                <div class="top-intelligence-panel">
                    <div class="panel-header">
                        <h3>TOP æ´å¯Ÿæ’è¡Œ</h3>
                        <div class="value-summary">
                            <div class="value-stat">é«˜ä»·å€¼æ´å¯Ÿ <strong id="highValueCount">--</strong></div>
                            <div class="value-stat">æŠ•èµ„æœºä¼š <strong id="investmentOpportunities">--</strong></div>
                        </div>
                    </div>
                    <div class="intelligence-list" id="intelligenceList">
                        <div class="loading">æ­£åœ¨åŠ è½½æ´å¯Ÿæ•°æ®...</div>
                    </div>
                </div>

                <div class="value-matrix-panel">
                    <div class="panel-header">
                        <h3>ä»·å€¼çŸ©é˜µ</h3>
                    </div>
                    <div class="chart-container">
                        <div class="loading">ä»·å€¼çŸ©é˜µåŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æŠ€æœ¯è¶‹åŠ¿åˆ†æ -->
        <section class="tech-trends">
            <div class="section-header">
                <h2>ğŸ”¥ æŠ€æœ¯è¶‹åŠ¿åˆ†æ</h2>
            </div>
            
            <div class="trends-grid">
                <div class="trends-stats-panel">
                    <div class="panel-header">
                        <h3>è¶‹åŠ¿ç»Ÿè®¡</h3>
                    </div>
                    <div class="trends-list" id="trendsList">
                        <div class="loading">æ­£åœ¨åˆ†æè¶‹åŠ¿...</div>
                    </div>
                </div>

                <div class="heatmap-panel">
                    <div class="panel-header">
                        <h3>æŠ€æœ¯çƒ­åº¦å›¾</h3>
                    </div>
                    <div class="heatmap-container">
                        <div class="loading">çƒ­åº¦å›¾åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç³»ç»Ÿæ§åˆ¶ -->
        <section class="system-control">
            <div class="section-header">
                <h2>ğŸ›ï¸ ç³»ç»Ÿæ§åˆ¶</h2>
            </div>
            <div class="control-panel">
                <div class="control-status">
                    <span id="systemStatus">âœ… ç³»ç»Ÿè¿è¡Œæ­£å¸¸ - æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨</span>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="dashboard-footer">
        <div class="footer-content">
            <div class="footer-left">
                <p>æŠ€æœ¯æ´å¯Ÿç³»ç»Ÿç›‘æ§ä»ªè¡¨æ¿ - æ•°æ®æ¡æ•°: <span id="dataCount">--</span></p>
            </div>
            <div class="footer-right">
                <span id="footerUpdate">--</span>
                <span class="separator">|</span>
                <span id="apiStatus" class="api-status">APIè¿æ¥æ£€æµ‹ä¸­</span>
            </div>
        </div>
    </footer>

    <!-- åŠ è½½é®ç½© -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>æŠ€æœ¯æ´å¯Ÿç³»ç»Ÿ</h3>
            <p id="loadingMessage">æ­£åœ¨åˆå§‹åŒ–ç³»ç»Ÿ...</p>
            <div class="loading-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>

    <!-- é”™è¯¯æ¨¡æ€æ¡† -->
    <div class="error-modal hidden" id="errorModal">
        <div class="error-content">
            <div class="error-header">
                <h3>âš ï¸ ç³»ç»Ÿé”™è¯¯</h3>
                <button class="close-btn" id="closeError">Ã—</button>
            </div>
            <div class="error-body">
                <p id="errorMessage">å‘ç”ŸæœªçŸ¥é”™è¯¯</p>
                <div class="error-details" id="errorDetails" style="display: none;">
                    <details>
                        <summary>æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</summary>
                        <pre id="errorStack"></pre>
                    </details>
                </div>
            </div>
            <div class="error-footer">
                <button class="btn-retry" id="retryBtn">é‡è¯•</button>
                <button class="btn-report">æŠ¥å‘Šé—®é¢˜</button>
            </div>
        </div>
    </div>

    <!-- è®¾ç½®é¢æ¿ -->
    <div class="settings-panel hidden" id="settingsPanel">
        <div class="settings-content">
            <div class="settings-header">
                <h3>âš™ï¸ ç³»ç»Ÿè®¾ç½®</h3>
                <button class="close-btn" id="closeSettings">Ã—</button>
            </div>
            <div class="settings-body">
                <div class="setting-group">
                    <label for="refreshInterval">è‡ªåŠ¨åˆ·æ–°é—´éš” (ç§’)</label>
                    <select id="refreshInterval">
                        <option value="15000">15ç§’</option>
                        <option value="30000">30ç§’</option>
                        <option value="60000">1åˆ†é’Ÿ</option>
                        <option value="300000">5åˆ†é’Ÿ</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label for="timeRangeSelect">æ—¶é—´èŒƒå›´</label>
                    <select id="timeRangeSelect">
                        <option value="1h">1å°æ—¶</option>
                        <option value="6h">6å°æ—¶</option>
                        <option value="24h">24å°æ—¶</option>
                        <option value="7d">7å¤©</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label for="rankingCriteria">æ’åºæ ‡å‡†</label>
                    <select id="rankingCriteria">
                        <option value="signal_strength">ä¿¡å·å¼ºåº¦</option>
                        <option value="commercial_value">å•†ä¸šä»·å€¼</option>
                        <option value="breakthrough_score">æŠ€æœ¯çªç ´æ€§</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="chartAnimation">
                        å¯ç”¨å›¾è¡¨åŠ¨ç”»
                    </label>
                </div>
                
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="darkMode">
                        æ·±è‰²æ¨¡å¼
                    </label>
                </div>
            </div>
            <div class="settings-footer">
                <button class="btn-save" id="saveSettings">ä¿å­˜è®¾ç½®</button>
                <button class="btn-reset" id="resetSettings">é‡ç½®</button>
            </div>
        </div>
    </div>

    <!-- JavaScriptæ–‡ä»¶ -->
    <script src="config/config.js"></script>
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/api.js"></script>
    <script src="assets/js/charts.js"></script>
    <script src="assets/js/app.js"></script>

    <!-- å†…è”æ ·å¼è¡¥å…… -->
    <style>
        .funnel-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .funnel-step {
            background: var(--background-secondary);
            padding: 1rem;
            border-radius: var(--radius);
            border-left: 4px solid var(--primary-color);
        }
        
        .step-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .step-icon {
            font-size: 1.25rem;
        }
        
        .step-label {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .step-tag {
            background: var(--primary-color);
            color: white;
            padding: 0.125rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
        }
        
        .step-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }
        
        .step-desc {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .step-arrow {
            font-size: 0.75rem;
            color: var(--success-color);
            font-weight: 600;
        }
        
        .control-panel {
            background: var(--card-background);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }
        
        .control-status {
            font-size: 1rem;
            color: var(--success-color);
            font-weight: 500;
        }
        
        .workflow-card {
            background: var(--background-secondary);
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 0.5rem;
        }
        
        .workflow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .workflow-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
    </style>
</body>
</html>
